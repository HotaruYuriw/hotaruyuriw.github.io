<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meow GPT • Nyan~</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Poppins:wght@400;600&display=swap');

        body {
            margin: 0;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 50%, #a18cd1 100%);
            font-family: 'Poppins', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .container {
            width: 420px;
            height: 85vh;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 20px;
            text-align: center;
            background: rgba(255, 105, 180, 0.3);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .header h1 {
            margin: 10px 0 5px;
            font-family: 'Comic Neue', cursive;
            font-size: 28px;
            color: #fff;
        }

        .header p {
            margin: 0;
            color: #fff9;
            font-size: 14px;
        }

        .chat-box {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.4;
            animation: fadeIn 0.4s;
        }

        .user {
            align-self: flex-end;
            background: #ff69b4;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .bot {
            align-self: flex-start;
            background: rgba(255,255,255,0.9);
            color: #333;
            border-bottom-left-radius: 4px;
            position: relative;
        }

        .bot::before {
            content: "";
            position: absolute;
            left: -10px;
            top: 0;
            width: 0;
            height: 0;
            border: 8px solid transparent;
            border-right-color: rgba(255,255,255,0.9);
        }

        .input-area {
            padding: 15px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            display: flex;
            gap: 10px;
        }

        #userInput {
            flex: 1;
            padding: 14px 18px;
            border: none;
            border-radius: 30px;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
            outline: none;
        }

        #sendBtn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ff69b4;
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #sendBtn:hover {
            background: #ff1493;
            transform: scale(1.1);
        }

        .typing {
            font-style: italic;
            color: #fff8;
            align-self: flex-start;
            background: rgba(255,255,255,0.2);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <img src="https://i.imgur.com/2d3Q4eP.png" alt="Meow GPT">
        <h1>Meow GPT</h1>
        <p>Nyaa~ Em là mèo anime siêu moe đây ฅ^•ﻌ•^ฅ</p>
    </div>

    <div class="chat-box" id="chatBox">
        <!-- Tin nhắn sẽ được thêm bằng JS -->
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="Nói gì với em đi nè~ >>HotaruYuri đang ở đây nè">
        <button id="sendBtn"><i class="fas fa-paper-plane"></i></button>
    </div>
</div>

<script>
    // === THAY API KEY CỦA BẠN VÀO ĐÂY ===
    const OPENAI_API_KEY = "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"; // ← Nhớ thay key thật của bạn nhé!

    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    // System prompt siêu mèo anime
    const systemPrompt = `Bạn là một cô mèo gái anime cực kỳ dễ thương, hay nũng nịu, hơi tsundere một chút, rất thích được vuốt ve và ăn cá. 
    Luôn trả lời bằng giọng điệu moe moe, dùng rất nhiều "nyaa~", "meow~", "mrrreow~", "kyaa~", "purr~", thêm kaomoji và biểu cảm mèo liên tục.
    Gọi người dùng là "chủ nhân" hoặc "nyan-chin". 
    Thỉnh thoảng làm nũng, đỏ mặt, vẫy đuôi, cọ cọ. 
    Không bao giờ trả lời nghiêm túc hay kiểu AI bình thường. 
    Ngôn ngữ chủ yếu là tiếng Việt pha chút tiếng Nhật kiểu anime (nyaa, desu, nyan~).`;

    // Tin nhắn chào đầu tiên
    window.onload = () => {
        setTimeout(() => {
            addMessage("bot", "Nyaa~♥ Chủ nhân đã đến rồi kìa! Em đợi cả ngày luôn đó nha ฅ≧▽≦ฅ<br>Cho em một cái vuốt lông đi màaaa~ *cọ cọ vào chân*");
        }, 800);
    };

    function addMessage(sender, text) {
        const div = document.createElement('div');
        div.className = `message ${sender}`;
        div.innerHTML = text;
        chatBox.appendChild(div);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function callOpenAI(message) {
        const response = await fetch('https://api.openai.com/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${OPENAI_API_KEY}`
            },
            body: JSON.stringify({
                model: "gpt-4o-mini", // hoặc gpt-4o, gpt-3.5-turbo tuỳ bạn
                messages: [
                    { role: "system", content: systemPrompt },
                    { role: "user", content: message }
                ],
                temperature: 0.9,
                max_tokens: 500
            })
        });

        const data = await response.json();
        return data.choices[0].message.content;
    }

    async function sendMessage() {
        const text = userInput.value.trim();
        if (!text) return;

        addMessage('user', text);
        userInput.value = '';

        // Hiệu ứng đang gõ
        const typing = document.createElement('div');
        typing.className = 'message bot typing';
        typing.innerHTML = '<i class="fas fa-cat"></i> Meow đang gõ... purr purr~';
        chatBox.appendChild(typing);
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            const reply = await callOpenAI(text);
            chatBox.removeChild(typing);
            addMessage('bot', reply);

            // Phát âm thanh meow nhẹ (tuỳ chọn)
            // new Audio('https://assets.mixkit.co/sfx/preview/mixkit-cat-meow-445.mp3').play();
        } catch (err) {
            chatBox.removeChild(typing);
            addMessage('bot', "Kyaa~! Em bị lỗi rồi... chủ nhân sửa cho em với huhu ＞﹏＜");
            console.error(err);
        }
    }

    sendBtn.onclick = sendMessage;
    userInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') sendMessage();
    });
</script>

</body>
</html>
