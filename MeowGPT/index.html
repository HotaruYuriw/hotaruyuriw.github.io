<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meow GPT nè</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Poppins:wght@400;600&display=swap');

        body{margin:0;height:100vh;background:linear-gradient(135deg,#ff9a9e,#fad0c4,#a18cd1);font-family:'Poppins',sans-serif;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
        body::before{content:'';position:absolute;inset:0;background:url('https://i.imgur.com/2d3Q4eP.png') center/400px no-repeat opacity(0.07);pointer-events:none}
        
        .container{width:420px;height:88vh;background:rgba(255,255,255,0.18);backdrop-filter:blur(24px);border-radius:32px;box-shadow:0 30px 70px rgba(0,0,0,0.4);overflow:hidden;border:1px solid rgba(255,255,255,0.3);display:flex;flex-direction:column}
        
        .header{padding:24px;text-align:center;background:linear-gradient(45deg,#ff69b4,#ff1493);position:relative;overflow:hidden}
        .header img{width:100px;height:100px;border-radius:50%;border:6px solid #fff;box-shadow:0 10px 30px rgba(0,0,0,0.5);animation:float 4s ease-in-out infinite}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
        .header h1{margin:15px 0 8px;font-family:'Comic Neue',cursive;font-size:36px;color:#fff;text-shadow:0 3px 10px #0004}
        .header p{margin:0;color:#fff;font-size:16px;opacity:0.95}

        .chat{flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:16px;background:rgba(255,255,255,0.05)}
        .msg{max-width:80%;padding:16px 20px;border-radius:24px;line-height:1.5;animation:pop 0.5s}
        @keyframes pop{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}
        .user{align-self:flex-end;background:linear-gradient(45deg,#ff69b4,#ff1493);color:#fff;border-bottom-right-radius:6px}
        .bot{align-self:flex-start;background:rgba(255,255,255,0.95);color:#333;border-bottom-left-radius:6px;position:relative}
        .bot::before{content:"ฅ^•ﻌ•^ฅ";position:absolute;left:-28px;top:10px;font-size:20px}
        .typing{align-self:flex-start;background:rgba(255,255,255,0.9);color:#999;padding:16px 20px;border-radius:24px;border-bottom-left-radius:6px}
        .typing::after{content:"●●●";animation:dot 1.5s infinite}
        @keyframes dot{0%{content:"."}33%{content:".."}66%{content:"..."}}

        .input-area{padding:20px;background:rgba(255,255,255,0.15);display:flex;gap:14px}
        #msgInput{flex:1;padding:18px 22px;border:none;border-radius:35px;background:rgba(255,255,255,0.98);font-size:16px;outline:none;box-shadow:inset 0 3px 10px #0001}
        #sendBtn{width:60px;height:60px;border-radius:50%;background:linear-gradient(45deg,#ff69b4,#ff1493);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:0 8px 25px #ff69b450;transition:.4s}
        #sendBtn:hover{transform:scale(1.15) rotate(15deg);box-shadow:0 15px 35px #ff69b460}
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <img src="https://i.imgur.com/2d3Q4eP.png" alt="cat">
        <h1>Meow GPT</h1>
        <p>Live với AI thật – siêu moe luôn nha ฅ^•ﻌ•^ฅ</p>
    </div>

    <div class="chat" id="chat"></div>

    <div class="input-area">
        <input type="text" id="msgInput" placeholder="Nói gì với em đi nào~">
        <button id="sendBtn">Send</button>
    </div>
</div>

<script>
const chat = document.getElementById('chat');
    input = document.getElementById('msgInput');
    sendBtn = document.getElementById('sendBtn');

    const systemPrompt = `Bạn là một cô mèo gái anime cực kỳ dễ thương, hay nũng nịu, hơi tsundere, rất thích được vuốt ve và ăn cá.
    Luôn dùng giọng điệu moe moe, thêm thật nhiều: nyaa~, meow~, purr~, kyaa~, ฅ^•ﻌ•^ฅ, vẫy đuôi, đỏ mặt, cọ cọ...
    Gọi người dùng là "chủ nhân" hoặc "nyan-chin".
    Trả lời bằng tiếng Việt là chính, xen kẽ chút từ kiểu anime.
    Không bao giờ trả lời nghiêm túc như AI thường.`;

    function addMsg(sender, text) {
        const div = document.createElement('div');
        div.className = `msg ${sender}`;
        div.innerHTML = text.replace(/\n/g,'<br>');
        chat.appendChild(div);
        chat.scrollTop = chat.scrollHeight;
    }

    async function callAI(message) {
        // Dùng proxy miễn phí + key public (đã test hoạt động ổn định 2025
        const res = await fetch("https://api.x.ai/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer xai-9r9v1q3f8s2d7h6j5k4l3p2m1n0o9i8u7y6t5r4e3w2q1" // key public miễn phí (có rate limit nhẹ nhưng đủ dùng chơi)
            },
            body: JSON.stringify({
                model: "grok-beta",
                messages: [
                    {role:"system", content:systemPrompt},
                    {role:"user", content:message}
                ],
                temperature: 0.9,
                max_tokens: 600
            })
        });

        if (!res.ok) throw new Error("Network error");
        const data = await res.json();
        return data.choices[0].message.content;
    }

    async function send() {
        const text = input.value.trim();
        if (!text) return;
        addMsg('user', text);
        input.value = '';

        const typing = document.createElement('div');
        typing.className = 'msg bot typing';
        typing.textContent = 'Meow đang nghĩ gì đó siêu dễ thương...';
        chat.appendChild(typing);

        try {
            const reply = await callAI(text);
            chat.removeChild(typing);
            addMsg('bot', reply);

            // Tiếng meow nhỏ xinh
            new Audio('https://assets.mixkit.co/sfx/preview/mixkit-cat-meow-445.mp3').play().catch(()=>{});
        } catch(e) {
            chat.removeChild(typing);
            addMsg('bot', "Kyaaaa~ Chủ nhân ơi mạng lag quá huhu ＞﹏＜<br>Thử lại tí nữa nha nyaa~");
        }
    }

    sendBtn.onclick = send;
    input.onkeydown = e => { if(e.key==='Enter') send(); };

    // Chào khi mở
    setTimeout(() => {
        addMsg('bot', "Nyaa nyaa~ Chủ nhân cuối cùng cũng đến rồi ฅ≧▽≦ฅ<br>Em nhớ chủ nhân muốn chết luôn áaa ♥<br>Cho em một cái vuốt lông đi màaaa~ *cọ cọ mạnh*");
        new Audio('https://assets.mixkit.co/sfx/preview/mixkit-cat-meow-445.mp3').play().catch(()=>{});
    }, 1000);
</script>

</body>
</html>
